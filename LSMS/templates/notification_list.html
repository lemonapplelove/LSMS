{% extends "base.html" %}     
{% block title %}List Notification{% endblock %}
{% block script %}
function delconfirm()
{
	return confirm("Are you sure to delete this notification? This process cannot be undone.")
}
{% endblock %}     
{% block banner %}{% if user.classmanager_set.all %}{{block.super}}{% endif %}{% endblock %}
{% block content %}   
{% if user.student_set.all %}
	<p style='width:100%;background-color:#DDDDDD;font-size:150%'>班级通知[{{extra.class}}]：</p>
{% endif %}
{% if user.classmanager_set.all %}
	<p>班级:<input type='text' disabled='true' value='{{extra.class}}' size='50'></p>
	<p>通知管理操作：<button onclick='javascript:window.open("/class/{{extra.class.id}}/notification/add", "","width=800px,height=600px")'>添加通知</button>
	<table width=100%>
	<tr style='vertical-align:top'>
	<td width=17% style='background-color:#DDDDDD'>
	<table style='vertical-align:top'>
	<tr><th>班级列表：<a href='/class'><button>返回班级列表</button></a></th></tr>
	{% for rec in extra.classes %}
	<tr><td><a href='/class/{{rec.id}}/notification'>{{rec}}</a></td></tr>
	{% endfor %}
	</table>
	</td>
	<td width=83%>
{% endif %}
<table width=100%>
<tr><th>通知标题</th><th>通知时间</th><th>过期时间</th><th></th></tr>
{% for rec in content %}
<tr><td><a href='#' onclick='javascript:window.open("/notification/{{rec.id}}", "","width=950px,height=700px")'>{{rec.notification_title}}</a></td>
	<td>{{rec.release_date}}</td>
	<td>{{rec.expire_date}}</td>
	<td>{% if user.classmanager_set.all %}<button style='background-color:pink' onclick='javascript:if(confirm("确认删除?"))window.open("/notification/{{rec.id}}/delete", "","width=0px,height=0px,top=400px,left=500px");'>删除</button>{% endif %}</td>
</tr>
{% empty %}
    <tr><td><p style='width:200px;background-color:pink;font-size:90%'>该班级当前没有通知。</p></td></tr>
{% endfor %}
</table>
{% if user.classmanager_set.all %}
	</td>
	</tr>
	</table>
{% endif %}
{% endblock %} 
{% block footer %}{% if user.classmanager_set.all %}{{block.super}}{% endif %}{% endblock %} 